{% load staticfiles %}
<!doctype html>
<html lang="en">
   <head>
      <!-- Required meta tags -->
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
      <title>For the best salons in town</title>
      <!-- Bootstrap CSS -->
      <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css" integrity="sha384-GJzZqFGwb1QTTN6wy59ffF1BuGJpLSa9DkKMp0DgiMDm4iYMj70gZWKYbI706tWS" crossorigin="anonymous">
      <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.0/css/all.css" integrity="sha384-lZN37f5QGtY3VHgisS14W3ExzMWZxybE1SJSEsQp9S+oqd12jhcu+A56Ebc1zFSJ" crossorigin="anonymous">
      <!-- GOogle fonts -->
      <link href="https://fonts.googleapis.com/css?family=Ubuntu" rel="stylesheet">
      <!-- custom css -->
      <link rel="stylesheet" href="{% static 'css/moreinfostyle.css' %}">
      <!--jquery  -->
      <script src="{% static 'js/jquery.js' %}"></script>
      <script src="{% static 'js/cart.js' %}"></script>
   </head>
   <body>
      <section class="salon-header" style="padding: 0px 15px 0px 15px;">
         <div class="row" style="height: height: 10px">
            <div class="card col-9" style="padding: 0px; margin: 0px; border: none">
               <div class="card-body" style="padding: 0px; margin: 0px">
                  <div id="carouselExampleIndicators" class="carousel slide" data-ride="carousel">
                     <ol class="carousel-indicators">
                        <li data-target="#carouselExampleIndicators" data-slide-to="0" class="active"></li>
                        <li data-target="#carouselExampleIndicators" data-slide-to="1"></li>
                        <li data-target="#carouselExampleIndicators" data-slide-to="2"></li>
                     </ol>
                     <div class="carousel-inner">
                        <div class="carousel-item active">
                           <img class="d-block w-100" src="{% static 'css/images/34.jpg' %}" alt="First slide">
                           <div class="carousel-caption d-none d-md-block">
                              <h5 style="color: #11AFF2; font-weight: bold;">Tuskys Salon</h5>
                              <p style="color: #000">For the best and latest cuts</p>
                           </div>
                        </div>
                        <div class="carousel-item">
                           <img class="d-block w-100" src="{% static 'css/images/cover1.jpg' %}" alt="Second slide">
                           <div class="carousel-caption d-none d-md-block">
                              <h5 style="color: #11AFF2; font-weight: bold;">Tuskys Salon</h5>
                              <p style="color: #000;">For the best and latest cuts</p>
                           </div>
                        </div>
                        <div class="carousel-item">
                           <img class="d-block w-100" src="{% static 'css/images/salon.jpg' %}" alt="Third slide">
                           <div class="carousel-caption d-none d-md-block">
                              <h5 style="color: #11AFF2; font-weight: bold;">Tuskys Salon</h5>
                              <p style="color: #000;">For the best and latest cuts</p>
                           </div>
                        </div>
                     </div>
                     <a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev">
                     <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                     <span class="sr-only">Previous</span>
                     </a>
                     <a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next">
                     <span class="carousel-control-next-icon" aria-hidden="true"></span>
                     <span class="sr-only">Next</span>
                     </a>
                  </div>
               </div>
            </div>
            <div class="card col-3" style="padding: 0px; margin: 0px">
               <div class="card-body" style="padding: 0px; margin: 0px">
                  Map
               </div>
            </div>
         </div>
      </section>
      <section class="salon-description">
         <div class="card col-11" style="border: none; margin: 0 auto; background-color: rgb(62,60,71,0.9);">
            <div class="card-body" style="color: whitesmoke;">
               <div class="row">
                  <h3 style="font-family: 'Ubuntu', sans-serif; color: whitesmoke; margin-bottom: 0px; font-weight: bold; font-size: 1.5em">{{ salon.salonName }}</h3>
                  <i align=right class="far fa-heart col-11"></i> <i class="fas fa-ellipsis-h"></i>
               </div>
               <i>{{ salon.description }}</i><br>
            </div>
            <div class="row">
               <div class="col-6">
                  <i style="color: #00AF87; padding-right: 6px" class="fas fa-map-marker-alt"></i> <b>{{ salon.location }}</b><br>
                  <i style="color: #00AF87; padding-right: 4px" class="far fa-thumbs-up"></i> {{ salon.likes }} Likes<br>
                  <i style="color: #00AF87; padding-right: 12px" class="fas fa-level-up-alt"></i>{{ salon.views }} Page visits<br>
               </div>
               <div>
                  <i style="color: #00AF87; padding-right: 6px" class="fas fa-map-marker-alt"></i> <b>{{ salon.location }}</b><br>
                  <i style="color: #00AF87; padding-right: 4px" class="far fa-thumbs-up"></i> {{ salon.likes }} Likes<br>
                  <i style="color: #00AF87; padding-right: 12px" class="fas fa-level-up-alt"></i>{{ salon.views }} Page visits<br>
               </div>
               <div style="margin-bottom: 20px;" align=right class="social col-11"><i class="fab fa-facebook"></i> <i class="fab fa-youtube"></i> <i class="fab fa-instagram"></i>  <i class="fab fa-twitter"></i></div>
            </div>
         </div>
         </div>
      </section>
      <section class="Services" style="padding: 0px 15px 0px 15px">
         <div class="row">
            <div class="card col-9 all-Services" style="border: none">
               <h3 style="font-family: 'Ubuntu', sans-serif; margin: 10px 0px 0px 10px;   color: #000; margin-bottom: 0px; font-weight: bold; font-size: 1.5em">Our Services and Products</h3>
               <div class="card-body">
                  <div class="row">
                    <!--For Services Offered  -->
                     <table class="table table-borderless table-sm col-8">
                        <thead style="background-color: #55C9AF; color: #fff; font-weight: bold;">
                           <tr>
                              <th scope="col"></th>
                              <th scope="col">Service</th>
                              <th scope="col">Cost</th>
                              <th scope="col">Duration</th>
                              <th scope="col">Availabilty</th>
                           </tr>
                        </thead>
                        <tbody class="all_services">
                             {% if services.count != 0 %}
                              {% for each in services %}
                              <tr style="border: none">
                                <td scope="row"><input type="checkbox" id="exampleCheck1"></td>
                                <td>{{ each.serviceName }}</td>
                                <td>{{ each.serviceCost }}</td>
                                <td>{{ each.serviceDuration }}</td>
                                <td>{{ each.availability }}</td>
                                </tr>
                                {% endfor %}
                              {% else %} <!-- spanning across the five columns-->
                              <tr style="border: none">
                              <td colspan="5" align="center">Sorry No Services For Now:)</td>
                             </tr>
                              {% endif%}

                        </tbody>
                     </table>
                     <!--For products  -->
                     <table class="table table-borderless table-sm col-4">
                        <thead style="background-color: whitesmoke; color: #55C9AF; font-weight: bold;">
                           <tr>
                              <th scope="col"></th>
                              <th scope="col">Product</th>
                              <th scope="col">Price</th>
                              <th scope="col">Product Brand</th>
                           </tr>
                        </thead>
                        <tbody>
                             {% if products.count != 0 %}
                              {% for each in products %}
                              <tr style="border: none">
                              <td scope="row"><input type="checkbox"></td>
                              <td>{{ each.product }}</td>
                              <td>{{ each.price }}</td>
                              <td>{{ each.product_brand }}</td>
                              </tr>
                              {% endfor %}
                              {% else %} <!-- spanning across the 4 columns-->
                              <tr style="border: none">
                              <td colspan="4" align="center">No Products Found! :)</td>
                              </tr>
                              {% endif%}

                        </tbody>
                     </table>
                  </div>
               </div>
            </div>
            <div class="card col-3 selected-Services" style="margin: 0px 0px 0px -20px; padding: 0px 0px 0px 0px ">
               <div class="card-header" style="color: #55C9AF; font-weight: bold">
                  Services/Products Selected
                  <i class="fa fa-shopping-cart"></i>
               </div>
               <div class="card-body">
                 <div class="container" id="show_cart">
                   <!--cart shows up here  -->
                 </div>
                  <div align="center"><button data-toggle="modal" data-target="" class="btn btn-outline-success">Click to Confirm</button></div>
               </div>
            </div>
         </div>
      </section>
      <!-- Modal -->
      <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
         <div class="modal-dialog" role="document">
            <div class="modal-content">
               <div class="modal-header">
                  <h5 class="modal-title" id="exampleModalLabel">Modal title</h5>
                  <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                  <span aria-hidden="true">&times;</span>
                  </button>
               </div>
               <div class="modal-body">
               </div>
               <div class="modal-footer">
                  <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                  <button type="button" class="btn btn-primary">Save changes</button>
               </div>
            </div>
         </div>
      </div>
      <section>
         <div class="card" align=center style="background-color: #CCEFE7; margin: 30px 0px 20px 0px">
            <div class="card-body">
               <div id="carouselIndicators" class="carousel slide" data-ride="carousel">
                  <ol class="carousel-indicators">
                     <li data-target="#carouselIndicators" data-slide-to="0" class="active"></li>
                     <li data-target="#carouselIndicators" data-slide-to="1"></li>
                     <li data-target="#carouselIndicators" data-slide-to="2"></li>
                  </ol>
                  <div class="carousel-inner" style="padding: 50px 0px 50px 0px ">
                     <div class="carousel-item active">
                        <p>Best salon ever</p>
                     </div>
                     <div class="carousel-item">
                        <p>Good prices</p>
                     </div>
                     <div class="carousel-item">
                        <p>Quality Services</p>
                     </div>
                  </div>
                  <a class="carousel-control-prev" href="#carouselIndicators" role="button" data-slide="prev">
                  <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                  <span class="sr-only">Previous</span>
                  </a>
                  <a class="carousel-control-next" href="#carouselIndicators" role="button" data-slide="next">
                  <span class="carousel-control-next-icon" aria-hidden="true"></span>
                  <span class="sr-only">Next</span>
                  </a>
               </div>
            </div>
         </div>
      </section>
      <script>
      // Handling number of views
         $(window).on('load', function(){
             var parent = $(this).parent();
             var salonId= {{salon.id}};
             $.ajax({
               url: '{% url "update_views" %}',
               type: 'POST',
               data: {
                 'salonId': salonId,
               }
             });

         });
         // adding and removing items from cart
         $("tr").on("click", function(e){
           $("input[type='checkbox']", this).each( function() {
           $(this).attr('checked', !$(this).attr('checked'));
              });
              var isChecked = $(this).find('input:checkbox').prop('checked');
              item=$(this).children('td').eq(1).html();
              cost=$(this).children('td').eq(2).html();
              var elem = '<div class="row show_item">&plus;<div class="col-sm">'+item+'</div><div class="col-sm">'+cost+'</div></div>';
              if(isChecked){
                $("#show_cart").append($.parseHTML(elem));
              }
              else {
                // Iterating through each item in cart
                var cartItems = $(".show_item");
                 for (var y=0; y<cartItems.length; y++){
                   get_item1 = $(cartItems[y]).children('div').eq(0).html().trim();
                   get_item2 = $(cartItems[y]).children('div').eq(1).html().trim();
                   if (get_item1 == item && get_item2==cost) {
                     $(cartItems[y]).remove(); //removing current div if match found
                   }
              }
            }
          });

      </script>
   </body>
</html>
