{% extends 'base.html' %}
{% load staticfiles %}
{% block content %}
<!-- RANKING SALONS IN SLIDER -->
<section class="salon-rank">
   <div id="carouselExampleIndicators" class="carousel slide" data-ride="carousel">
      <ol class="carousel-indicators">
         <li data-target="#carouselExampleIndicators" data-slide-to="0" class="active"></li>
         <li data-target="#carouselExampleIndicators" data-slide-to="1"></li>
         <li data-target="#carouselExampleIndicators" data-slide-to="2"></li>
      </ol>
      <div class="carousel-inner">
         <div class="carousel-item active">
            <img class="d-block w-100" src="{% static 'css/images/34.jpg' %}" alt="First slide">
            <div class="carousel-caption d-none d-md-block">
               <h5 style="color: #11AFF2; font-weight: bold;">Tuskys Salon</h5>
               <p style="color: #000">For the best and latest cuts</p>
            </div>
         </div>
         <div class="carousel-item">
            <img class="d-block w-100" src="{% static 'css/images/cover1.jpg' %}" alt="Second slide">
            <div class="carousel-caption d-none d-md-block">
               <h5 style="color: #11AFF2; font-weight: bold;">Tuskys Salon</h5>
               <p style="color: #000;">For the best and latest cuts</p>
            </div>
         </div>
         <div class="carousel-item">
            <img class="d-block w-100" src="{% static 'css/images/salon.jpg' %}" alt="Third slide">
            <div class="carousel-caption d-none d-md-block">
               <h5 style="color: #11AFF2; font-weight: bold;">Tuskys Salon</h5>
               <p style="color: #000;">For the best and latest cuts</p>
            </div>
         </div>
      </div>
      <a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev">
      <span class="carousel-control-prev-icon" aria-hidden="true"></span>
      <span class="sr-only">Previous</span>
      </a>
      <a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next">
      <span class="carousel-control-next-icon" aria-hidden="true"></span>
      <span class="sr-only">Next</span>
      </a>
   </div>
</section>
<!-- Getting a splited screen for left and right-->
<!--<the outer container containing both left and right -->
<div class=" w3-row w3-border ">
   <div class="w3-container w3-quarter " style="padding-top:5px">
      <div class="w3-container" style="line-height: 30px; font-family: 'Kanit', sans-serif;">
         <h4 style="margin-bottom: 20px;">Filter Salons</h4>
         <div class="fakeimg"><i class="fas fa-fire" style="color: #11AEF1"></i> Popular</div>
         <div class="fakeimg"><i class="fas fa-search-location" style="color: #11AEF1"></i> Near me</div>
         <div class="fakeimg"><i class="far fa-thumbs-up" style="color: #11AEF1"></i> Recommended</div>
         <div class="fakeimg"><i class="fas fa-gift" style="color: #11AEF1"></i> Offers</div>
         <div class="input-group mb-3" align="left"  width: 50%">
           <select class="custom-select" id="location" style="font-weight: bold">
             <option selected>All Locations</option>
             {% for each in salons %}
                <option value="{{ each.location }}">{{ each.location }}</option>
              {% endfor %}
            </select>
        </div>
   </div>
   <hr>
   <!--Advertisements -->
   <div class="w3-content w3-container " style="max-width:400px">
      <div class="mySlides w3-container w3-red">
         <h1><b>Hurry!!!</b></h1>
         <h1><i>Get your salon Known</i></h1>
      </div>
      <div class="mySlides w3-container w3-white">
         <div><span class="w3-tag w3-yellow">New!</span><p> Get one month free on hairways </p></div>
      </div>
   </div>
</div>
<!--The right container containing to cards -->
<div class="w3-container w3-rest  ">
<!--search by salon names-->
<div align="right">
   <input class="search-input form-control" placeholder="Search salon..." style="border: 2px solid #80BDFF; color: #000; font-weight: bold;">
   <!-- <i align="left" class="fas fa-search" style="margin-left: 0px"></i> -->
</div>
<div class="salon_wrapper">
  {{ salons.count }}
   {% if salons.count != 0 %}
   {% for each_salon in salons %}
   <div class="w3-col s6 w3-mobile" style="padding-left:10px">
      <div class="blog-card" style="height:250px">
         <div class="meta">
            <div class="photo" style="background-image: url({% static 'css/images/cover1.jpg' %})"></div>
            <ul class="details">
               <li class="author"><a href="#"></a></li>
               <li class="date">Rank: {{ each_salon.likes }}/10</li>
               <li class="tags">
                  <ul>
                     <li><a href="#" class="salon_location">{{ each_salon.location }}</a></li>
                  </ul>
               </li>
            </ul>
         </div>
         <div class="description">
            <h1> {{ each_salon.salonName }} </h1>
            <h2>{{ each_salon.location }}</h2>
            <p class="salon_descri"> {{each_salon.description}}</p>
            <p class="read-more">
               {% block comment %} Star Rating {% endblock %}
               <span style="padding-right:32px">
               <span class="fa fa-star checked"></span>
               <span class="fa fa-star checked"></span>
               <span class="fa fa-star checked"></span>
               <span class="fa fa-star"></span>
               <span class="fa fa-star"></span>
               </span>
               <a href="{% url 'moreinfo' id=each_salon.id %}" class="top-menu">Find More</a>
            </p>
            <hr>
            <ul class="icons">
               <li><i class="fa fa-eye fa-2x">{{ each_salon.views }}</i></li>
               <li><i class="fa fa-heart-o fa-2x">{{ each_salon.likes }}</i></li>
               <li><i class="fa fa-envelope-o fa-2x">{{ each_salon.approved_comments.count }}</i></li>
               <li><i class="fa fa-share-alt fa-2x">{{ each_salon.shares }}</i></li>
            </ul>
         </div>
      </div>
   </div>
   {% endfor %}
   <br>
   {% if salons.has_other_pages %}
   <div class="w3-center" >
      <div class="w3-bar w3-xlarge w3-border w3-round">
         {% if salons.has_previous %}
         <a href="?page={{ salons.previous_page_number }}" class="w3-button">&laquo;</a>
         {% else %}
         <a href="#" class="w3-button w3-disabled">&laquo;</a>
         {% endif %}
         {% for i in salons.paginator.page_range %}
         {% if salons.number == i %}
         <a  class="w3-button w3-pale-green">{{ i }} </a>
         {% else %}
         <a href="?page={{ i }}" class="w3-button">{{ i }}</a>
         {% endif %}
         {% endfor %}
         {% if salons.has_next %}
         <a href="?page={{ salons.next_page_number }}" class="w3-button">&raquo;</a>
         {% else %}
         <a href="" class="w3-button w3-disabled">&raquo;</a>
         {% endif %}
      </div>
   </div>
   {% endif %}
   {% else %}
   <p> No Salons To Display :(</p>
   {% endif %}
</div>
<!-- : end of left -->
<!-- Adding black theme on navbar on scroll -->
<script>
   $(document).ready(function() {
     $('.menu-icon').bind('click', 'onload', function() {
       $('nav ul').toggleClass('showing');
     });

     $(window).on('scroll', function() {
       if($(window).scrollTop()) {
         $('nav').addClass('black');
       }
       else {
         $('nav').removeClass('black');
       }
     });
   });
</script>
<script>
   var slideIndex = 0;
   carousel();

   function carousel() {
   var i;
   var x = document.getElementsByClassName("mySlides");
   for (i = 0; i < x.length; i++) {
   x[i].style.display = "none";
   }
   slideIndex++;
   if (slideIndex > x.length) {slideIndex = 1}
   x[slideIndex-1].style.display = "block";
   setTimeout(carousel, 2000);
   }
   </script>
<!-- // Getting filtered salons according to locations -->
<script type="text/javascript">
  // removing duplicate entries on drop down
  temporary = {};
  jQuery('.custom-select').children().each(function() {
    var txt = jQuery(this).attr('value');
    if (temporary[txt]) {
        jQuery(this).remove();
    } else {
        temporary[txt] = true;
    }
  });
  // Getting selected option from drpdown
   $('#location').on('change',function() {
     var location = $(this).val();
     if (location == "All Locations") {
       $(".w3-col, .s6, .w3-mobile").show();
     }else{
       var match_location = $(".salon_location");
       for (var i=0; i<match_location.length; i++){
         if (location != $(match_location[i]).html()) {
           $(".w3-col, .s6, .w3-mobile").eq(i).hide();
         }else {
           $(".w3-col, .s6, .w3-mobile").eq(i).show();
         }
       }
     }
   });
   var salonNames = $(".description h1");
   $(".search-input").on("keyup", function() {
     var query = $(this).val();
     checkSalon(query); // call filter method
   });
   function checkSalon(starts_with) {
     salon_list = []
     // Iterating through each salon
     for (var y=0; y<salonNames.length; y++){
       if ($.trim(starts_with).length != 0){ //if there is sth in the input start filtering
         compare_salon = $(salonNames[y]).html().toLowerCase().trim();
         // comparing user input and all salon names
         if(compare_salon.startsWith(starts_with.toLowerCase())){
           $(".w3-col, .s6, .w3-mobile").eq(y).show();
           salon_list.push(compare_salon);
         }
         else { // if didn't much hide that salon card
         $(".w3-col, .s6, .w3-mobile").eq(y).hide();
       }
     }
     else { // if input is empty show everything
       $(".w3-col, .s6, .w3-mobile").eq(y).show();
     }
   }
   }
</script>
{% endblock %}
